<!DOCTYPE html>
<html>
<head>
    <title>³é¿¨Ä£ÄâÆ÷</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
        }
        
        .button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .button:hover {
            background-color: #45a049;
        }
        
        .result {
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .backpack {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 9999;
        }
        
        .backpack h2 {
            margin-top: 0;
            text-align: center;
        }
        
        .backpack .draw-count {
            text-align: center;
            font-size: 14px;
            color: #888;
        }
        
        .backpack ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .backpack li {
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .backpack .item-name {
            flex-grow: 1;
        }
        
        .backpack .item-count {
            margin-left: 10px;
            color: #888;
        }
        
        .count-text {
            font-size: 14px;
            color: #888;
            margin-top: 10px;
            text-align: center;
        }

        .return-button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #ccc;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
            float: right;
        }

        .return-button:hover {
            background-color: #999;
        }

        .probability-button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
            float: right;
            margin-right: 10px;
        }

        .probability-button:hover {
            background-color: #45a049;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-header {
            margin-bottom: 10px;
        }

        .modal-body {

            margin-bottom: 10px;
        }

        .modal-footer {
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>³é¿¨Ä£ÄâÆ÷</h1>
        <div>
            <a class="button" href="#" onclick="singleDraw()">µ¥³é</a>
            <a class="button" href="#" onclick="multiDraw()">Ê®Á¬³é</a>
            <a class="button" href="#" onclick="toggleBackpack()">±³°ü</a>
            <a class="return-button" href="Ê×Ò³.html">·µ»Ø</a>
            <a class="probability-button" href="#" onclick="showProbability()">¸ÅÂÊ¹«Ê¾</a>
        </div>
        <div class="result">
            <p id="resultText"></p>
            <p class="count-text" id="countText"></p>
        </div>
    </div>

    <div class="backpack" id="backpack" style="display: none;">
        <h2>±³°ü</h2>
        <ul id="backpackList"></ul>
    </div>

    <div id="probabilityModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeProbabilityModal()">&times;</span>
            <div class="modal-header">
                <h2>¸ÅÂÊ¹«Ê¾</h2>
            </div>
            <div class="modal-body">
                <p>SSR£º5%</p>
				<p>µç»÷Ç¹</p>
                <p>SR£º15%</p>
				<p>²¨²¨µ°</p>
                <p>R£º80%</p>
				<p>ºÚ»ê¡¢ÎÚæÝ¡¢°¢Ã¨¡¢Ë®ºø¡¢ÀË×Ð¡¢°¬¶û¡¢Þ²Ã×¡¢Äê×Ó¡¢À¶±ù¡£</p>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>

    <script>
        var backpack = [];
        var drawCount = 0;

        function singleDraw() {
            drawCount += 1;
            document.getElementById("countText").textContent = "¹²³é" + drawCount + "´Î";
            var prizes = [
                { name: "ºÚ»ê", rarity: "R" },
                { name: "ÎÚæÝ", rarity: "R" },
                { name: "°¢Ã¨", rarity: "R" },
                { name: "Ë®ºø", rarity: "R" },
				{ name: "ÀË×Ð", rarity: "R" },
				{ name: "°¬¶û", rarity: "R" },
				{ name: "Þ²Ã×", rarity: "R" },
				{ name: "Äê×Ó", rarity: "R" },
				{ name: "À¶±ù", rarity: "R" },
				{ name: "²¨²¨µ°", rarity: "SR" },
                { name: "µç»÷Ç¹", rarity: "SSR" }
            ];
            var prize = drawPrize(prizes);
            document.getElementById("resultText").textContent = prize.name;
            addToBackpack(prize.name);
            refreshBackpack();
        }

        function multiDraw() {
            drawCount += 10;
            document.getElementById("countText").textContent = "¹²³é" + drawCount + "´Î";
            var prizes = [
                { name: "ºÚ»ê", rarity: "R" },
                { name: "ÎÚæÝ", rarity: "R" },
                { name: "°¢Ã¨", rarity: "R" },
                { name: "Ë®ºø", rarity: "R" },
				{ name: "ÀË×Ð", rarity: "R" },
				{ name: "°¬¶û", rarity: "R" },
				{ name: "Þ²Ã×", rarity: "R" },
				{ name: "Äê×Ó", rarity: "R" },
				{ name: "À¶±ù", rarity: "R" },
				{ name: "²¨²¨µ°", rarity: "SR" },
                { name: "µç»÷Ç¹", rarity: "SSR" }
            ];
            var result = "";
            for (var i = 0; i < 10; i++) {
                var prize = drawPrize(prizes);
                result += prize.name + " ";
                addToBackpack(prize.name);
                if ((i + 1) % 5 === 0) {
                    result += "<br>";
                }
            }
            document.getElementById("resultText").innerHTML = result;
            refreshBackpack();
        }

        function drawPrize(prizes) {
            var totalWeight = prizes.reduce((sum, prize) => sum + getWeight(prize.rarity), 0);
            var random = Math.random() * totalWeight;
            var weightSum = 0;
            for (var i = 0; i < prizes.length; i++) {
                weightSum += getWeight(prizes[i].rarity);
                if (random <= weightSum) {
                    return prizes[i];
                }
            }
        }

        function getWeight(rarity) {
            switch (rarity) {
                case "SSR":
                    return 5;
                case "SR":
                    return 15;
                case "R":
                    return 80;
                default:
                    return 0;
            }
        }

        function addToBackpack(prize) {
            var index = backpack.findIndex(item => item.name === prize);
            if (index !== -1) {
                backpack[index].count++;
            } else {
                backpack.push({ name: prize, count: 1 });
            }
        }

        function toggleBackpack() {
            var backpackElement = document.getElementById("backpack");
            if (backpackElement.style.display === "none") {
                backpackElement.style.display = "block";
                refreshBackpack();
            } else {
                backpackElement.style.display = "none";
            }
        }

        function refreshBackpack() {
            var backpackList = document.getElementById("backpackList");
            backpackList.innerHTML = "";
            backpack.forEach(item => {
                var li = document.createElement("li");
                li.innerHTML = '<span class="item-name">' + item.name + '</span><span class="item-count">¡Á' + item.count + '</span>';
                backpackList.appendChild(li);
            });
        }

        function showProbability() {
            var modal = document.getElementById("probabilityModal");
            modal.style.display = "block";
        }

        function closeProbabilityModal() {
            var modal = document.getElementById("probabilityModal");
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            var modal = document.getElementById("probabilityModal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>