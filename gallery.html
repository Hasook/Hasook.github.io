<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hasoook's Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#FB7299', // B站粉色
            secondary: '#23ADE5',
            dark: {
              100: '#333333',
              200: '#222222',
              300: '#1A1A1A'
            },
            light: {
              100: '#FFFFFF',
              200: '#F5F5F5',
              300: '#EEEEEE'
            }
          },
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .card-hover {
        @apply transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
      }
      .image-container {
        @apply relative overflow-hidden rounded-lg;
      }
      .image-thumbnail {
        @apply w-full h-full object-cover transition-transform duration-500 hover:scale-110;
      }
    }
  </style>
</head>

<body class="font-inter bg-light-200 dark:bg-dark-200 text-gray-800 dark:text-gray-200 transition-colors duration-300">
  <!-- 导航栏 -->
  <header id="navbar" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-light-100/90 dark:bg-dark-200/90 backdrop-blur-md shadow-sm">
    <div class="container mx-auto px-4 py-3 md:py-4 flex items-center justify-between">
      <!-- Logo和标题 -->
      <a href="#" class="flex items-center gap-2">
        <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
          <i class="fa fa-picture-o text-white text-xl"></i>
        </div>
        <h1 class="text-xl md:text-2xl font-bold tracking-tight">
          <span class="text-primary">Hasoook</span>'s Gallery
        </h1>
      </a>
      
      <!-- 桌面端导航 -->
      <nav class="hidden md:flex items-center gap-6">
        <button id="tab-fanart" class="nav-tab active py-2 font-medium text-primary border-b-2 border-primary transition-all">
          粉丝投稿
        </button>
        <button id="tab-created" class="nav-tab py-2 font-medium text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-all">
          官方创作
        </button>
        <a href="https://space.bilibili.com/" target="_blank" class="flex items-center gap-1 px-4 py-2 rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors">
          <i class="fa fa-bilibili"></i>
          <span>我的B站</span>
        </a>
      </nav>
      
      <!-- 主题切换按钮 -->
      <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-dark-100 transition-colors">
        <i class="fa fa-moon-o dark:hidden text-xl"></i>
        <i class="fa fa-sun-o hidden dark:block text-xl"></i>
      </button>
      
      <!-- 移动端菜单按钮 -->
      <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-dark-100 transition-colors">
        <i class="fa fa-bars text-xl"></i>
      </button>
    </div>
    
    <!-- 移动端导航菜单 -->
    <div id="mobile-menu" class="md:hidden hidden bg-light-100 dark:bg-dark-200 border-t dark:border-gray-700">
      <div class="container mx-auto px-4 py-3 flex flex-col gap-3">
        <button id="mobile-tab-fanart" class="mobile-nav-tab active py-2 font-medium text-primary text-left">
          粉丝投稿
        </button>
        <button id="mobile-tab-created" class="mobile-nav-tab py-2 font-medium text-gray-600 dark:text-gray-400 text-left">
          官方创作
        </button>
        <a href="https://space.bilibili.com/" target="_blank" class="flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors w-fit">
          <i class="fa fa-bilibili"></i>
          <span>我的B站空间</span>
        </a>
      </div>
    </div>
  </header>

  <!-- 主内容区 - 增加顶部间距避免被导航栏遮挡 -->
  <main class="container mx-auto px-4 pt-28 md:pt-32 pb-16">
    <!-- 页面标题 -->
    <div class="mb-10 text-center">
      <h2 id="page-title" class="text-[clamp(1.8rem,4vw,2.8rem)] font-bold mb-3 text-shadow">粉丝投稿作品</h2>
      <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">感谢大家的喜爱与创作，这里收集了所有粉丝绘制的Hasoook人设作品，每一份都是独特的心意。</p>
    </div>
    
    <!-- 图片过滤和搜索 -->
    <div class="mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
      <div class="flex flex-wrap gap-2">
        <button class="filter-btn active px-4 py-2 rounded-full bg-primary text-white text-sm">全部</button>
        <button class="filter-btn px-4 py-2 rounded-full bg-light-300 dark:bg-dark-100 text-sm hover:bg-primary/10 transition-colors">插画</button>
        <button class="filter-btn px-4 py-2 rounded-full bg-light-300 dark:bg-dark-100 text-sm hover:bg-primary/10 transition-colors">漫画</button>
        <button class="filter-btn px-4 py-2 rounded-full bg-light-300 dark:bg-dark-100 text-sm hover:bg-primary/10 transition-colors">Q版</button>
      </div>
      <div class="relative w-full sm:w-auto">
        <input type="text" placeholder="搜索作品..." class="w-full sm:w-64 pl-10 pr-4 py-2 rounded-full bg-light-300 dark:bg-dark-100 border border-gray-200 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50">
        <i class="fa fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"></i>
      </div>
    </div>
    
    <!-- 粉丝投稿图片网格 -->
    <section id="fanart-gallery" class="gallery-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      <!-- 图片项1 - 禁止保存实例 -->
      <div class="gallery-item card-hover bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-md" data-category="插画" data-type="fanart">
        <div class="image-container aspect-square cursor-pointer" data-id="1" oncontextmenu="return false;" ondragstart="return false;">
          <img src="D:\图片\图\04e24cac8097b6e1439afebc617b148e233954763.jpg" alt="粉丝绘制的Hasoook插画" class="image-thumbnail" draggable="false">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end">
            <div class="p-4 text-white">
              <h3 class="font-semibold">夏日Hasoook</h3>
              <p class="text-sm text-gray-200">by 小画家</p>
            </div>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400">2023-06-15</span>
            <span class="px-2 py-1 text-xs rounded-full bg-primary/10 text-primary">插画</span>
          </div>
        </div>
      </div>
      
      <!-- 图片项2 - 可保存 -->
      <div class="gallery-item card-hover bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-md" data-category="Q版" data-type="fanart">
        <div class="image-container aspect-square cursor-pointer" data-id="2">
          <img src="https://picsum.photos/seed/hasoook2/800/800" alt="粉丝绘制的Hasoook Q版" class="image-thumbnail">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end">
            <div class="p-4 text-white">
              <h3 class="font-semibold">Q版Hasoook</h3>
              <p class="text-sm text-gray-200">by 萌萌子</p>
            </div>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400">2023-06-10</span>
            <span class="px-2 py-1 text-xs rounded-full bg-primary/10 text-primary">Q版</span>
          </div>
        </div>
      </div>
      
      <!-- 图片项3 - 可保存 -->
      <div class="gallery-item card-hover bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-md" data-category="漫画" data-type="fanart">
        <div class="image-container aspect-square cursor-pointer" data-id="3">
          <img src="https://picsum.photos/seed/hasoook3/800/800" alt="粉丝绘制的Hasoook漫画" class="image-thumbnail">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end">
            <div class="p-4 text-white">
              <h3 class="font-semibold">Hasoook日常</h3>
              <p class="text-sm text-gray-200">by 漫画达人</p>
            </div>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400">2023-06-05</span>
            <span class="px-2 py-1 text-xs rounded-full bg-primary/10 text-primary">漫画</span>
          </div>
        </div>
      </div>
      
      <!-- 图片项4 - 可保存 -->
      <div class="gallery-item card-hover bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-md" data-category="插画" data-type="fanart">
        <div class="image-container aspect-square cursor-pointer" data-id="4">
          <img src="https://picsum.photos/seed/hasoook4/800/800" alt="粉丝绘制的Hasoook插画" class="image-thumbnail">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end">
            <div class="p-4 text-white">
              <h3 class="font-semibold">古风Hasoook</h3>
              <p class="text-sm text-gray-200">by 古风爱好者</p>
            </div>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400">2023-05-28</span>
            <span class="px-2 py-1 text-xs rounded-full bg-primary/10 text-primary">插画</span>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 官方创作图片网格 (默认隐藏) -->
    <section id="created-gallery" class="gallery-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 hidden">
      <!-- 官方创作图片项1 - 禁止保存实例 -->
      <div class="gallery-item card-hover bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-md" data-category="表情" data-type="created">
        <div class="image-container aspect-square cursor-pointer" data-id="11" oncontextmenu="return false;" ondragstart="return false;">
          <img src="https://picsum.photos/seed/hasoook11/800/800" alt="Hasoook官方表情" class="image-thumbnail" draggable="false">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end">
            <div class="p-4 text-white">
              <h3 class="font-semibold">惊讶表情</h3>
              <p class="text-sm text-gray-200">官方限定</p>
            </div>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400">2023-06-20</span>
            <span class="px-2 py-1 text-xs rounded-full bg-secondary/10 text-secondary">表情</span>
          </div>
        </div>
      </div>
      
      <!-- 官方创作图片项2 - 可保存 -->
      <div class="gallery-item card-hover bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-md" data-category="人设" data-type="created">
        <div class="image-container aspect-square cursor-pointer" data-id="12">
          <img src="https://picsum.photos/seed/hasoook12/800/800" alt="Hasoook官方人设" class="image-thumbnail">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end">
            <div class="p-4 text-white">
              <h3 class="font-semibold">夏季人设</h3>
              <p class="text-sm text-gray-200">官方设定</p>
            </div>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400">2023-06-18</span>
            <span class="px-2 py-1 text-xs rounded-full bg-secondary/10 text-secondary">人设</span>
          </div>
        </div>
      </div>
      
      <!-- 官方创作图片项3 - 可保存 -->
      <div class="gallery-item card-hover bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-md" data-category="封面" data-type="created">
        <div class="image-container aspect-square cursor-pointer" data-id="13">
          <img src="https://picsum.photos/seed/hasoook13/800/800" alt="Hasoook视频封面" class="image-thumbnail">
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end">
            <div class="p-4 text-white">
              <h3 class="font-semibold">游戏实况封面</h3>
              <p class="text-sm text-gray-200">视频专用</p>
            </div>
          </div>
        </div>
        <div class="p-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500 dark:text-gray-400">2023-06-12</span>
            <span class="px-2 py-1 text-xs rounded-full bg-secondary/10 text-secondary">封面</span>
          </div>
        </div>
      </div>
    </section>
    
    <!-- 加载更多按钮 -->
    <div class="mt-10 text-center">
      <button id="load-more" class="px-6 py-3 rounded-full bg-light-300 dark:bg-dark-100 hover:bg-primary hover:text-white transition-all duration-300 font-medium">
        加载更多 <i class="fa fa-chevron-down ml-1"></i>
      </button>
    </div>
  </main>
  
  <!-- 图片详情模态框 -->
  <div id="image-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 opacity-0 pointer-events-none transition-opacity duration-300">
    <div class="relative w-full max-w-4xl max-h-[90vh] bg-light-100 dark:bg-dark-100 rounded-xl overflow-hidden shadow-2xl transform scale-95 transition-transform duration-300">
      <!-- 关闭按钮 -->
      <button id="close-modal" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-black/50 text-white flex items-center justify-center z-10 hover:bg-black/70 transition-colors">
        <i class="fa fa-times"></i>
      </button>
      
      <!-- 模态框内容 -->
      <div class="flex flex-col md:flex-row h-full">
        <!-- 图片区域 -->
        <div class="md:w-2/3 bg-gray-100 dark:bg-gray-800 flex items-center justify-center p-4">
          <img id="modal-image" src="" alt="图片详情" class="max-w-full max-h-[60vh] md:max-h-[80vh] object-contain">
        </div>
        
        <!-- 信息区域 -->
        <div class="md:w-1/3 p-6 overflow-y-auto">
          <h3 id="modal-title" class="text-2xl font-bold mb-2"></h3>
          <p id="modal-artist" class="text-gray-600 dark:text-gray-400 mb-4"></p>
          
          <div class="flex items-center gap-3 mb-6">
            <span id="modal-date" class="px-3 py-1 rounded-full bg-light-300 dark:bg-dark-300 text-sm"></span>
            <span id="modal-category" class="px-3 py-1 rounded-full text-sm"></span>
          </div>
          
          <div class="mb-6">
            <h4 class="text-lg font-semibold mb-2">作品描述</h4>
            <p id="modal-description" class="text-gray-700 dark:text-gray-300 leading-relaxed"></p>
          </div>
          
          <div class="flex gap-3">
            <!-- 动态判断是否可保存（根据图片ID） -->
            <button id="save-btn" class="flex-1 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center justify-center gap-2">
              <i class="fa fa-download"></i> 保存图片
            </button>
            <button class="flex-1 py-2 rounded-lg bg-light-300 dark:bg-dark-300 hover:bg-gray-300 dark:hover:bg-dark-100 transition-colors flex items-center justify-center gap-2">
              <i class="fa fa-share-alt"></i> 分享
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 页脚 -->
  <footer class="bg-light-100 dark:bg-dark-100 border-t dark:border-gray-800 py-8">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-6 md:mb-0">
          <div class="flex items-center gap-2 mb-2">
            <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
              <i class="fa fa-picture-o text-white"></i>
            </div>
            <h3 class="text-lg font-bold">
              <span class="text-primary">Hasoook</span>'s Gallery
            </h3>
          </div>
          <p class="text-sm text-gray-600 dark:text-gray-400">展示所有精彩的创作作品</p>
        </div>
        
        <div class="flex gap-6 mb-6 md:mb-0">
          <a href="https://space.bilibili.com/" target="_blank" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors">
            <i class="fa fa-bilibili text-2xl"></i>
          </a>
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors">
            <i class="fa fa-weibo text-2xl"></i>
          </a>
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors">
            <i class="fa fa-twitter text-2xl"></i>
          </a>
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary transition-colors">
            <i class="fa fa-instagram text-2xl"></i>
          </a>
        </div>
      </div>
      
      <div class="mt-8 pt-6 border-t dark:border-gray-800 text-center text-sm text-gray-500 dark:text-gray-500">
        <p>© 2023 Hasoook's Gallery. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // 图片数据
    const imageData = {
      1: {
        title: "夏日Hasoook",
        artist: "by 小画家",
        date: "2023-06-15",
        category: "插画",
        type: "fanart",
        image: "D:/图片/图/04e24cac8097b6e1439afebc617b148e233954763.jpg",
        description: "夏天到了，画了一张Hasoook的夏日海边图，希望大家喜欢！一直很喜欢Hasoook的视频，每次看都觉得很开心，这是我第一次投稿，希望能被看到~",
        allowSave: false // 禁止保存
      },
      2: {
        title: "Q版Hasoook",
        artist: "by 萌萌子",
        date: "2023-06-10",
        category: "Q版",
        type: "fanart",
        image: "https://picsum.photos/seed/hasoook2/1200/1200",
        description: "画了Q版的Hasoook，太可爱了！尝试了新的绘画风格，希望大家喜欢。Hasoook的每个表情都很有特点，特别适合Q版化~",
        allowSave: true // 允许保存
      },
      3: {
        title: "Hasoook日常",
        artist: "by 漫画达人",
        date: "2023-06-05",
        category: "漫画",
        type: "fanart",
        image: "https://picsum.photos/seed/hasoook3/1200/1200",
        description: "根据Hasoook视频里的一些小日常改编的四格漫画，希望能捕捉到那种轻松愉快的氛围。画漫画真的很有趣，以后还会继续创作更多~",
        allowSave: true
      },
      4: {
        title: "古风Hasoook",
        artist: "by 古风爱好者",
        date: "2023-05-28",
        category: "插画",
        type: "fanart",
        image: "https://picsum.photos/seed/hasoook4/1200/1200",
        description: "突发奇想画了古风版本的Hasoook，感觉意外地合适呢！参考了一些古风服饰和背景，希望能展现出不一样的气质。",
        allowSave: true
      },
      11: {
        title: "惊讶表情",
        artist: "官方限定",
        date: "2023-06-20",
        category: "表情",
        type: "created",
        image: "https://picsum.photos/seed/hasoook11/1200/1200",
        description: "官方定制的惊讶表情，将在后续视频中使用。特别感谢画手大大@XXX的创作，完美捕捉了想要表达的情绪。",
        allowSave: false // 禁止保存
      },
      12: {
        title: "夏季人设",
        artist: "官方设定",
        date: "2023-06-18",
        category: "人设",
        type: "created",
        image: "https://picsum.photos/seed/hasoook12/1200/1200",
        description: "2023夏季新版人设，更新了服装和一些细节设计，希望能给大家带来新鲜感。这套设计更轻便适合夏季主题的视频内容。",
        allowSave: true
      },
      13: {
        title: "游戏实况封面",
        artist: "视频专用",
        date: "2023-06-12",
        category: "封面",
        type: "created",
        image: "https://picsum.photos/seed/hasoook13/1200/1200",
        description: "新系列游戏实况的专用封面，结合了游戏元素和个人形象设计。后续会根据游戏进度推出更多版本的封面图。",
        allowSave: true
      }
    };
    
    // DOM元素
    const navbar = document.getElementById('navbar');
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const themeToggle = document.getElementById('theme-toggle');
    const tabFanart = document.getElementById('tab-fanart');
    const tabCreated = document.getElementById('tab-created');
    const mobileTabFanart = document.getElementById('mobile-tab-fanart');
    const mobileTabCreated = document.getElementById('mobile-tab-created');
    const fanartGallery = document.getElementById('fanart-gallery');
    const createdGallery = document.getElementById('created-gallery');
    const pageTitle = document.getElementById('page-title');
    const pageDescription = document.querySelector('#page-title + p');
    const imageModal = document.getElementById('image-modal');
    const modalImage = document.getElementById('modal-image');
    const modalTitle = document.getElementById('modal-title');
    const modalArtist = document.getElementById('modal-artist');
    const modalDate = document.getElementById('modal-date');
    const modalCategory = document.getElementById('modal-category');
    const modalDescription = document.getElementById('modal-description');
    const closeModal = document.getElementById('close-modal');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const loadMoreBtn = document.getElementById('load-more');
    const saveBtn = document.getElementById('save-btn');
    let currentImageId = null; // 当前查看的图片ID
    
    // 只对禁止保存的图片区域限制右键
    document.addEventListener('contextmenu', (e) => {
      const isProtected = e.target.closest('[oncontextmenu="return false;"]');
      if (isProtected) {
        e.preventDefault();
        return false;
      }
    });
    
    // 滚动时导航栏效果
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.classList.add('py-2', 'shadow');
        navbar.classList.remove('py-3', 'md:py-4', 'shadow-sm');
      } else {
        navbar.classList.add('py-3', 'md:py-4', 'shadow-sm');
        navbar.classList.remove('py-2', 'shadow');
      }
    });
    
    // 移动端菜单切换
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
    
    // 主题切换
    themeToggle.addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
    });
    
    // 检查本地存储的主题偏好
    if (localStorage.getItem('theme') === 'dark' || 
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
    
    // 切换图片分类
    function switchToFanart() {
      fanartGallery.classList.remove('hidden');
      createdGallery.classList.add('hidden');
      pageTitle.textContent = '粉丝投稿作品';
      pageDescription.textContent = '感谢大家的喜爱与创作，这里收集了所有粉丝绘制的Hasoook人设作品，每一份都是独特的心意。';
      
      // 更新导航状态
      tabFanart.classList.add('active', 'text-primary', 'border-b-2', 'border-primary');
      tabFanart.classList.remove('text-gray-600', 'dark:text-gray-400');
      tabCreated.classList.remove('active', 'text-primary', 'border-b-2', 'border-primary');
      tabCreated.classList.add('text-gray-600', 'dark:text-gray-400');
      
      mobileTabFanart.classList.add('active', 'text-primary');
      mobileTabFanart.classList.remove('text-gray-600', 'dark:text-gray-400');
      mobileTabCreated.classList.remove('active', 'text-primary');
      mobileTabCreated.classList.add('text-gray-600', 'dark:text-gray-400');
      
      // 关闭移动菜单
      mobileMenu.classList.add('hidden');
    }
    
    function switchToCreated() {
      fanartGallery.classList.add('hidden');
      createdGallery.classList.remove('hidden');
      pageTitle.textContent = '官方创作作品';
      pageDescription.textContent = '这里展示的是官方定制的Hasoook人设、表情和各类图片，用于视频创作和粉丝互动。';
      
      // 更新导航状态
      tabCreated.classList.add('active', 'text-primary', 'border-b-2', 'border-primary');
      tabCreated.classList.remove('text-gray-600', 'dark:text-gray-400');
      tabFanart.classList.remove('active', 'text-primary', 'border-b-2', 'border-primary');
      tabFanart.classList.add('text-gray-600', 'dark:text-gray-400');
      
      mobileTabCreated.classList.add('active', 'text-primary');
      mobileTabCreated.classList.remove('text-gray-600', 'dark:text-gray-400');
      mobileTabFanart.classList.remove('active', 'text-primary');
      mobileTabFanart.classList.add('text-gray-600', 'dark:text-gray-400');
      
      // 关闭移动菜单
      mobileMenu.classList.add('hidden');
    }
    
    tabFanart.addEventListener('click', switchToFanart);
    tabCreated.addEventListener('click', switchToCreated);
    mobileTabFanart.addEventListener('click', switchToFanart);
    mobileTabCreated.addEventListener('click', switchToCreated);
    
    // 打开图片详情
    document.querySelectorAll('.image-container').forEach(container => {
      container.addEventListener('click', () => {
        currentImageId = container.getAttribute('data-id');
        const data = imageData[currentImageId];
        
        if (data) {
          modalImage.src = data.image;
          modalImage.alt = data.title;
          modalTitle.textContent = data.title;
          modalArtist.textContent = data.artist;
          modalDate.textContent = data.date;
          modalCategory.textContent = data.category;
          modalDescription.textContent = data.description;
          
          // 设置分类标签颜色
          if (data.type === 'fanart') {
            modalCategory.classList.add('bg-primary/10', 'text-primary');
            modalCategory.classList.remove('bg-secondary/10', 'text-secondary');
          } else {
            modalCategory.classList.add('bg-secondary/10', 'text-secondary');
            modalCategory.classList.remove('bg-primary/10', 'text-primary');
          }
          
          // 设置保存按钮状态
          if (data.allowSave) {
            saveBtn.classList.remove('bg-gray-300', 'dark:bg-gray-700', 'text-gray-500', 'dark:text-gray-400', 'cursor-not-allowed');
            saveBtn.classList.add('bg-primary', 'text-white', 'hover:bg-primary/90');
            saveBtn.innerHTML = '<i class="fa fa-download"></i> 保存图片';
            saveBtn.disabled = false;
          } else {
            saveBtn.classList.remove('bg-primary', 'text-white', 'hover:bg-primary/90');
            saveBtn.classList.add('bg-gray-300', 'dark:bg-gray-700', 'text-gray-500', 'dark:text-gray-400', 'cursor-not-allowed');
            saveBtn.innerHTML = '<i class="fa fa-download"></i> 禁止保存';
            saveBtn.disabled = true;
          }
          
          // 显示模态框
          imageModal.classList.remove('opacity-0', 'pointer-events-none');
          imageModal.querySelector('div').classList.remove('scale-95');
          imageModal.querySelector('div').classList.add('scale-100');
          document.body.style.overflow = 'hidden';
        }
      });
    });
    
    // 保存图片功能
    saveBtn.addEventListener('click', () => {
      if (!currentImageId) return;
      const data = imageData[currentImageId];
      
      if (data && data.allowSave) {
        // 创建临时链接下载图片
        const link = document.createElement('a');
        link.href = data.image;
        link.download = `${data.title}.jpg`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        // 显示提示
        const notification = document.createElement('div');
        notification.className = 'fixed bottom-6 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-lg z-50';
        notification.textContent = '图片保存成功！';
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
          setTimeout(() => notification.remove(), 500);
        }, 2000);
      }
    });
    
    // 关闭图片详情
    function closeImageModal() {
      imageModal.classList.add('opacity-0', 'pointer-events-none');
      imageModal.querySelector('div').classList.remove('scale-100');
      imageModal.querySelector('div').classList.add('scale-95');
      document.body.style.overflow = '';
      currentImageId = null;
    }
    
    closeModal.addEventListener('click', closeImageModal);
    
    // 点击模态框背景关闭
    imageModal.addEventListener('click', (e) => {
      if (e.target === imageModal) {
        closeImageModal();
      }
    });
    
    // 按ESC键关闭
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !imageModal.classList.contains('pointer-events-none')) {
        closeImageModal();
      }
    });
    
    // 过滤图片
    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // 更新按钮状态
        filterBtns.forEach(b => {
          b.classList.remove('active', 'bg-primary', 'text-white');
          b.classList.add('bg-light-300', 'dark:bg-dark-100', 'hover:bg-primary/10');
        });
        btn.classList.add('active', 'bg-primary', 'text-white');
        btn.classList.remove('bg-light-300', 'dark:bg-dark-100', 'hover:bg-primary/10');
        
        const category = btn.textContent.trim();
        const activeGallery = fanartGallery.classList.contains('hidden') ? createdGallery : fanartGallery;
        
        // 过滤图片
        activeGallery.querySelectorAll('.gallery-item').forEach(item => {
          if (category === '全部' || item.getAttribute('data-category') === category) {
            item.style.display = 'block';
          } else {
            item.style.display = 'none';
          }
        });
      });
    });
    
    // 加载更多按钮
    loadMoreBtn.addEventListener('click', () => {
      // 模拟加载中状态
      loadMoreBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i> 加载中...';
      loadMoreBtn.disabled = true;
      
      // 2秒后恢复原状
      setTimeout(() => {
        loadMoreBtn.innerHTML = '加载更多 <i class="fa fa-chevron-down ml-1"></i>';
        loadMoreBtn.disabled = false;
        
        // 显示提示
        const notification = document.createElement('div');
        notification.className = 'fixed bottom-6 left-1/2 -translate-x-1/2 bg-dark-200 dark:bg-light-100 text-white dark:text-gray-800 px-6 py-3 rounded-full shadow-lg z-50';
        notification.textContent = '已经加载全部内容啦~';
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
          setTimeout(() => notification.remove(), 500);
        }, 2000);
      }, 1500);
    });
  </script>
</body>
</html>
